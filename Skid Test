if not game:IsLoaded() then 
	repeat game.Loaded:Wait()
	until game:IsLoaded() 
end

local Players = game["Players"]
local Client = Players.localPlayer;
local function fail(r) return Client:Kick(r) end

-- gracefully handle errors when loading external scripts
-- added a cache to make hot reloading a bit faster
local function ClickUI(Button, Manual)
	local connections = getconnections(Button.Activated)

	if Manual then
		for i, v in ipairs(connections) do
			v.Function()
		end
	else
		for i, v in ipairs(connections) do
			v:Fire()
		end
	end
end

_G["Team"] = "Pirates"
repeat wait(0.5)
	local CT = Client.PlayerGui.Main:FindFirstChild("ChooseTeam")
	if Client.Team == nil and CT.Visible then
		local chooseTeamFrame = nil
		if _G["Team"] == "Pirates" then
			chooseTeamFrame = CT.Container.Pirates.Frame.ViewportFrame
		elseif _G["Team"] == "Marines" then
			chooseTeamFrame = CT.Container.Marines.Frame.ViewportFrame
		else
			chooseTeamFrame = CT.Container.Pirates.Frame.ViewportFrame
		end

		ClickUI(chooseTeamFrame.TextButton, true)
	end
until Client.Team ~= nil and game:IsLoaded()

-- gracefully handle errors when loading external scripts
-- added a cache to make hot reloading a bit faster

shared.__urlcache = shared.__urlcache or {}
local function urlLoad(url)
	local success, result

	if shared.__urlcache[url] then
		success, result = true, shared.__urlcache[url]
	else
		success, result = pcall(game.HttpGet, game, url)
	end

	if (not success) then
		return fail(string.format("Failed to GET url %q for reason: %q", url, tostring(result)))
	end

	local fn, err = loadstring(result)
	if (type(fn) ~= "function") then
		return fail(string.format("Failed to loadstring url %q for reason: %q", url, tostring(err)))
	end

	local results = { pcall(fn) }
	if (not results[1]) then
		return fail(string.format("Failed to initialize url %q for reason: %q", url, tostring(results[2])))
	end

	shared.__urlcache[url] = result
	return unpack(results, 2)
end

local Fluent = urlLoad("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua")
local metadata = urlLoad("https://raw.githubusercontent.com/RedGamer12/Zero.-./main/metadata.lua")

local SaveManager = urlLoad("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/SaveManager.lua")
local InterfaceManager = urlLoad("https://raw.githubusercontent.com/dawid-scripts/Fluent/master/Addons/InterfaceManager.lua")

local lvl = urlLoad("https://raw.githubusercontent.com/RedGamer12/Zero.-./main/Module/level_data.lua")
local Rep = "https://raw.githubusercontent.com/RedGamer12/Zero.-./main/Module/"
local PlayerTracker = loadstring(game:HttpGet(Rep.."PlayerTracker.lua"))()

local runService = game:GetService("RunService")
local httpService = game:GetService("HttpService")
local Lighting = game:GetService("Lighting")
local ReplicatedStorage = game["ReplicatedStorage"]

local VIM = game:GetService("VirtualInputManager")
local VirtualUser = game:GetService("VirtualUser")

local ToggleCrazzy = urlLoad("https://raw.githubusercontent.com/RedGamer12/Zero.-./main/Module/Crazzy%20Support%20Button.lua")

do
	if shared._unload then
		pcall(shared._unload)
	end

	function shared._unload()
		if shared._id then
			pcall(runService.UnbindFromRenderStep, runService, shared._id)
		end

		Fluent:Destroy()

		for i = 1, #shared.threads do
			coroutine.close(shared.threads[i])
		end

		for i = 1, #shared.callbacks do
			task.spawn(shared.callbacks[i])
		end
	end

	shared.threads = {}
	shared.callbacks = {}

	shared._id = httpService:GenerateGUID(false)
end

local placeID = game.PlaceId
if placeID == 2753915549 then
	Sea1 = true
elseif placeID == 4442272183 then
	Sea2 = true
elseif placeID == 7449423635 then
	Sea3 = true
end

local Window = Fluent:CreateWindow({
	Title = string.format("Crazzy Hub - Blox Fruit version %s | updated: %s", metadata.version, metadata.updated),
	SubTitle = "by mike_uzime2",
	TabWidth = 160,
	Size = UDim2.fromOffset(580, 460),
	Acrylic = true, -- The blur may be detectable, setting this to false disables blur entirely
	Theme = "Dark",
	MinimizeKey = Enum.KeyCode.LeftControl -- Used when theres no MinimizeKeybind
})

local Holder = ToggleCrazzy:CreateUI()
local func1 = function()
	Fluent.GUI.Enabled = true
end

local func2 = function()
	Fluent.GUI.Enabled = false
end

ToggleCrazzy:NewButton(Holder, func1, func2)

local Tabs = {
	About = Window:AddTab({ Title = "About", Icon = "info" }),
	MF = Window:AddTab({ Title = "Main Farm", Icon = "wrench" }),
	OF = Window:AddTab({ Title = "Other Farm", Icon = "archive" }),
	R = Window:AddTab({ Title = "Raid", Icon = "container" }),
	Settings = Window:AddTab({ Title = "Settings", Icon = "cog" }),
}

function Notify(seconds, content, subContent, duration)
	local lastNotificationTime = os.time() - seconds - 1  -- Initialize to ensure the first notification is sent

	local currentTime = os.time()
	if currentTime - lastNotificationTime >= seconds then
		Fluent:Notify({
			Title = "Notification",
			Content = content,
			SubContent = subContent, -- Optional
			Duration = duration -- Set to nil to make the notification not disappear
		})
		lastNotificationTime = currentTime
	end
end

local url = { Discord = {"https://discord.gg/waAZsqdB"}, YT = {"https://www.youtube.com/channel/UCSef7PX7KK5f365OpqiiR1Q"}}
local x2Code = {
	"FUDD10",
	"BIGNEWS",
	"THEGREATACE",
	"SUB2GAMERROBOT_EXP1",
	"StrawHatMaine",
	"Sub2OfficialNoobie",
	"SUB2NOOBMASTER123",
	"Sub2Daigrock",
	"Axiore",
	"TantaiGaming",
	"JCWK",
	"Starcodeheo",
	"Sub2Fer999",
	"Magicbus",
	"Enyu_is_Pro",
	"Bluxxy",
	"KittGaming"
};
local Travel = {
	"TravelMain",
	"TravelDressrosa",
	"TravelZou",
}
local FoundB={}for b,c in pairs(ReplicatedStorage:GetChildren())do if c:FindFirstChild("Humanoid")and string.find(c.Humanoid.DisplayName,"Boss")then table.insert(FoundB,c.Name)end end
if Sea1 then
	MaterialList = {
		"Scrap Metal",
		"Leather",
		"Angel Wings",
		"Magma Ore",
		"Fish Tail"
	};
elseif Sea2 then
	MaterialList = {
		"Scrap Metal",
		"Leather",
		"Radioactive Material",
		"Mystic Droplet",
		"Magma Ore",
		"Vampire Fang"
	};
elseif Sea3 then
	MaterialList = {
		"Scrap Metal",
		"Leather",
		"Demonic Wisp",
		"Conjured Cocoa",
		"Dragon Scale",
		"Gunpowder",
		"Fish Tail",
		"Mini Tusk"
	};
end;
local MasteryType = {
	"Quest",
	"No Quest",
	"Boss",
	"Nearest"
};
local Skills = {Melee = {"Z", "X", "C"}, Sword = {"Z", "X"}, Gun = {"Z", "X"}, BloxFruit = {"Z", "X", "C", "V"}}
local PriceFS = {
	["Black Leg"] = {Beli = 150000, Fragment = 0},
	["Fishman Karate"] = {Beli = 750000, Fragment = 0},
	["Electro"] = {Beli = 500000, Fragment = 0},
	["Dragon Claw"] = {Beli = 0, Fragment = 1500},
	["Superhuman"] = {Beli = 3000000, Fragment = 0},
	["Sharkman Karate"] = {Beli = 2500000, Fragment = 5000},
	["Death Step"] = {Beli = 2500000, Fragment = 5000},
	["Dragon Talon"] = {Beli = 3000000, Fragment = 5000},
	["Godhuman"] = {Beli = 5000000, Fragment = 5000},
	["Electric Claw"] = {Beli = 3000000, Fragment = 5000}
}
local Comm = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("CommF_")
local Items = {Sword = {"Saber","Rengoku","Buddy Sword","Canvander","Hallow Scythe","Dark Dagger",},Gun = {"Serpent Bow","Soul Guitar",},}
local MethodFarm = {
	"Upper",
	"Bellow",
	"Behind"
};
local RaidList = {
	"Flame",
	"Ice",
	"Quake",
	"Light",
	"Dark",
	"Spider",
	"Rumble",
	"Magma",
	"Human: Buddha",
	"Sand",
	"Bird: Phoenix",
	"Dough",
}

function Com(com,...)
	local Remote = ReplicatedStorage.Remotes:FindFirstChild("Comm"..com)
	if Remote:IsA("RemoteEvent") then
		Remote:FireServer(...)
	elseif Remote:IsA("RemoteFunction") then
		Remote:InvokeServer(...)
	end
end

do
	-- "About" Section:

	Tabs.About:AddParagraph({
		Title = "FoC: ",
		Content = "tungsuccac"
	})

	Tabs.About:AddParagraph({
		Title = "Developer: ",
		Content = "- NgocAnhBeo\n- mike_uzime2"
	})

	Tabs.About:AddButton({
		Title = "Contact Us",
		Description = "If you have any problems, Don't worry; please report to us.",
		Callback = function()
			Window:Dialog({
				Title = "Social Media",
				Content = "",
				Buttons = {
					{
						Title = "Youtube",
						Callback = function()
							setclipboard(url.YT[1]);
						end
					},
					{
						Title = "Discord Invite",
						Callback = function()
							setclipboard(url.Discord[1]);
						end
					},
					{
						Title = "Cancel",
						Callback = function()
							print("Cancelled the dialog.")
						end
					}
				}
			})
		end
	})

	-- "MF" Section:
	
	Tabs.MF:AddParagraph({
		Title = "Total dXP Code/s: 17",
		Content = ""
	})

	Tabs.MF:AddButton({
		Title = "Redeem all Code",
		Description = "",
		Callback = function()
			for i, v in pairs(x2Code) do
				Com("F_", x2Code);
			end
		end
	})
	
	Tabs.About:AddButton({
		Title = "Teleport to all Sea",
		Description = "",
		Callback = function()
			Window:Dialog({
				Title = "Do you decide to travel with one of them?",
				Content = "",
				Buttons = {
					{
						Title = "Sea1",
						Callback = function()
							Com("F_", Travel[1]);
						end
					},
					{
						Title = "Sea2",
						Callback = function()
							Com("F_", Travel[2]);
						end
					},
					{
						Title = "Sea3",
						Callback = function()
							Com("F_", Travel[3]);
						end
					},
					{
						Title = "Cancel",
						Callback = function()
							print("Cancelled the dialog.")
						end
					}
				}
			})
		end
	})
	
	--
	Tabs.MF:AddParagraph({
		Title = "Main Farm",
		Content = ""
	})
	
	Tabs.MF:AddToggle("AFL", {Title = "Start Farm Selected Mode", Default = false })
	Tabs.MF:AddDropdown("FB", {
		Title = "Found Boss: ",
		Values = FoundB,
		Multi = false,
		Default = 1,
	})
	Toggles.FB:OnChanged(function()
		Toggles.FB:SetValues(FoundB)
	end)
	Tabs.MF:AddToggle("ABS", {Title = "Auto Boss Selected", Default = false })
	
	--
	Tabs.MF:AddParagraph({
		Title = "Mastery Farm",
		Content = ""
	})
	
	Tabs.MF:AddDropdown("SMT", {
		Title = "Select Mastery Type: ",
		Values = MasteryType,
		Multi = false,
		Default = 1,
	})
	local a = "Auto Mastery "
	Tabs.MF:AddToggle("AMBF", {Title = a.."Blox Fruit", Default = false })
	Tabs.MF:AddToggle("AMG", {Title = a.."Gun", Default = false })
	Tabs.MF:AddSlider("HKA", {
		Title = "%Health ",
		Description = "",
		Default = 1,
		Min = 0,
		Max = 100,
		Rounding = 1
	})
	for _, skill in pairs(Skills.BloxFruit) do
		Tabs.MF:AddToggle("AMBF", {Title = "Skill"..skill, Default = true})
	end
	
	--
	local ObservationRange = Tabs.MF:AddParagraph({
		Title = "",
		Content = ""
	})
	spawn(function()
		while true do
			pcall(function()
				ObservationRange.Title = "Observation Level : " .. math.floor(Client.VisionRadius.Value);
				wait();
			end);
		end;
	end);
	Tabs.MF:AddToggle("TO", {Title = "Training Observation", Default = true})
	Tabs.MF:AddToggle("GOV2", {Title = "Observation V2", Default = true})
	Tabs.MF:AddToggle("GOV2H", {Title = "Observation V2 + Hop", Default = true})
	
	--
	Tabs.MF:AddParagraph({
		Title = "Ectoplasm",
		Content = ""
	})
	
	Tabs.MF:AddToggle("AE", {Title = "Auto Ectoplasm", Default = false })
	
	--
	Tabs.MF:AddParagraph({
		Title = "Material",
		Content = ""
	})
	
	Tabs.MF:AddDropdown("SM", {
		Title = "Select Material: ",
		Values = MaterialList,
		Multi = false,
		Default = 1,
	})
	Tabs.MF:AddToggle("AFM", {Title = "Auto Farm Material", Default = false })
	
	--
	Tabs.MF:AddParagraph({
		Title = "Bone/s",
		Content = ""
	})
	Tabs.MF:AddToggle("AB", {Title = "Auto Bone", Default = false })
	Tabs.MF:AddToggle("ARB", {Title = "Auto Random Bone", Default = false })
	Tabs.MF:AddToggle("ATL", {Title = "Auto Try Luck", Default = false })
	
	--
	Tabs.MF:AddParagraph({
		Title = "Factory & Pirate",
		Content = ""
	})
	
	Tabs.MF:AddToggle("AF", {Title = "Auto Factory", Default = false })
	Tabs.MF:AddToggle("APR", {Title = "Auto Pirate Raid", Default = false })
	Tabs.MF:AddToggle("AP", {Title = "Auto Pray", Default = false })
	
	--
	Tabs.MF:AddParagraph({
		Title = "Sea Event",
		Content = ""
	})
	
	Tabs.MF:AddToggle("ATerrorS", {Title = "Auto Terror Shark", Default = false })
	Tabs.MF:AddToggle("ADB", {Title = "Auto Drive Boat(Sit On Boat)", Default = false })
	Tabs.MF:AddToggle("KSB", {Title = "Kill Sea Beast", Default = false })
	
	--
	Tabs.MF:AddParagraph({
		Title = "Unlock Sea",
		Content = ""
	})
	
	Tabs.MF:AddToggle("ASS", {Title = "Auto Second Sea", Default = false })
	Tabs.MF:AddToggle("AThirdS", {Title = "Auto Third Sea", Default = false })
	
	-- "OF" Section:
	
	Tabs.OF:AddParagraph({
		Title = "Getting Fighting Style",
		Content = ""
	})
	for fs, _ in pairs(PriceFS) do
		Tabs.OF:AddToggle("fs", {Title = fs, Default = false })
	end
	
	--
	local DP = Tabs.OF:AddParagraph({
		Title = "Raid Boss: ",
		Content = ""
	})
	spawn(function()
		while task.wait() do
			pcall(function()
				if string.len(Com("F_", "CakePrinceSpawner")) == 88 then
					DP.Content = ("Killed : " .. string.sub(Com("F_", "CakePrinceSpawner"), 39, 41) .. " / 500");
				elseif string.len(Com("F_", "CakePrinceSpawner")) == 87 then
					DP.Content = ("Killed : " .. string.sub(Com("F_", "CakePrinceSpawner"), 39, 40) .. " / 500");
				elseif string.len(Com("F_", "CakePrinceSpawner")) == 86 then
					DP.Content = ("Killed : " .. string.sub(Com("F_", "CakePrinceSpawner"), 39, 39) .. " / 500");
				else
					DP.Content = ("Cake Prince Has Been Spawned ✅");
				end;
			end);
		end;
	end)
	Tabs.OF:AddToggle("ACP", {Title = "Auto Cake Prince", Default = false })
	Tabs.OF:AddToggle("ADK", {Title = "Auto Dough King", Default = false })
	Tabs.OF:AddToggle("ARI", {Title = "Auto Rip_Indra", Default = false })
	
	--
	local EH = Tabs.OF:AddParagraph({
		Title = "Elite Hunter",
		Content = ""
	})
	local EliteProgress = Tabs.OF:AddParagraph({
		Title = "",
		Content = ""
	})
	local BosstElite = Tabs.OF:AddParagraph({
		Title = "",
		Content = ""
	})
	spawn(function()
		while task.wait(0.1) do
			pcall(function()
				local progelit = tostring(Comm:InvokeServer("EliteHunter", "Progress"));
				EliteProgress:Set("[Total Elite Killed : " .. progelit .. "]");
				if ReplicatedStorage:FindFirstChild("Diablo [Lv. 1750]") or ReplicatedStorage:FindFirstChild("Deandre [Lv. 1750]") or ReplicatedStorage:FindFirstChild("Urban [Lv. 1750]") or workspace.Enemies:FindFirstChild("Diablo [Lv. 1750]") or workspace.Enemies:FindFirstChild("Deandre [Lv. 1750]") or workspace.Enemies:FindFirstChild("Urban [Lv. 1750]") then
					BosstElite:Set("Elite Boss : ✅");
				else
					BosstElite:Set("Elite Hunter : ❌ ");
				end;
			end);
		end;
	end);
	Tabs.OF:AddToggle("AEH", {Title = "Auto Elite Hunter", Default = false })
	
	--
	Tabs.OF:AddParagraph({
		Title = "Item",
		Content = "Cursed Dual Katana"
	})
	Tabs.OF:AddToggle("AHT", {Title = "Auto Horly Torch", Default = false })
	Tabs.OF:AddToggle("AT", {Title = "Auto Tushita", Default = false })
	Tabs.OF:AddToggle("AY", {Title = "Auto Yama", Default = false })
	Tabs.OF:AddToggle("ACDK", {Title = "Auto Cursed Dual Katana", Default = false })
	
	--
	Tabs.OF:AddParagraph({
		Title = "More items",
		Content = ""
	})
	for _, SG in pairs(Items.Sword and Items.Gun) do
		Tabs.OF:AddToggle(SG, {Title = "Auto "..SG, Default = false })
	end
	
	--
	Tabs.OF:AddParagraph({
		Title = "Quest/s: ",
		Content = ""
	})
	Tabs.OF:AddToggle("CQ", {Title = "Citizen Quest", Default = false })
	Tabs.OF:AddToggle("BQ", {Title = "Bartilo Quest", Default = false })
	
	--
	Tabs.OF:AddParagraph({
		Title = "Race & Haki: ",
		Content = ""
	})
	Tabs.OF:AddToggle("ARV2", {Title = "Auto Race V2", Default = false })
	Tabs.OF:AddToggle("AHR", {Title = "Auto Haki Rainbow", Default = false })
	
	-- "R" Section:

	Tabs.R:AddParagraph({
		Title = "Raid Settings: ",
		Content = ""
	})

	Tabs.R:AddDropdown("SC", {
		Title = "Select Chip: ",
		Values = RaidList,
		Multi = false,
		Default = 1,
	})
	Tabs.R:AddToggle("BC", {Title = "Buy Chip", Default = false })
	Tabs.R:AddToggle("SR", {Title = "Start Raid", Default = false })
	Tabs.R:AddToggle("ACL", {Title = "Auto Click", Default = false })
	
	-- "Settings" Section:
	
	Tabs.Settings:AddParagraph({
		Title = "Bypass for game: ",
		Content = ""
	})

	Tabs.Settings:AddToggle("AC", {Title = "Anticheat", Default = false })
	Tabs.Settings:AddToggle("AFK", {Title = "AFK", Default = false })
	
	--
	Tabs.Settings:AddParagraph({
		Title = "Effects: ",
		Content = ""
	})
	
	Tabs.Settings:AddToggle("RA", {Title = "Remove Attack", Default = false })
	Tabs.Settings:AddToggle("RDFX", {Title = "Remove Die FX", Default = false })

	--
	Tabs.Settings:AddParagraph({
		Title = "Set Farm: ",
		Content = ""
	})
	
	Tabs.Settings:AddDropdown("STF", {
		Title = "Select Type Farm: ",
		Values = MethodFarm,
		Multi = false,
		Default = 1,
	})
	Tabs.Settings:AddSlider("D", {
		Title = "Distance",
		Description = "",
		Default = 2,
		Min = 0,
		Max = 100,
		Rounding = 1
	})
	Tabs.Settings:AddToggle("BTP", {Title = "Bypass Teleport", Default = false })
	Tabs.Settings:AddToggle("FA", {Title = "Fast Attack", Default = false })
	Tabs.Settings:AddToggle("ACL", {Title = "Auto Click", Default = false })
	Tabs.Settings:AddSlider("DTB", {
		Title = "Distance to Bring",
		Description = "",
		Default = 300,
		Min = 0,
		Max = 500,
		Rounding = 1
	})
	Tabs.Settings:AddToggle("BM", {Title = "Bring Mob", Default = false })
	Tabs.Settings:AddToggle("SSP", {Title = "Set Spawn Point", Default = false })
	Tabs.Settings:AddToggle("ARV4", {Title = "Awakening Race V4", Default = false })
	
	--
	Tabs.Settings:AddParagraph({
		Title = "Set Positions: ",
		Content = ""
	})
	
	Tabs.Settings:AddToggle("PosX", {Title = "X", Default = false })
	Tabs.Settings:AddToggle("PosY", {Title = "Y", Default = false })
	Tabs.Settings:AddToggle("PosZ", {Title = "Z", Default = false })
end
